
{% for error in form.non_field_errors %}
  <div class="alert error">{{ error }}</div>
{% endfor %}
<form method="POST" action="" enctype="multipart/form-data">
  {% csrf_token %}

  {% if forms %}
    {% for form in forms %}
      {% if form.display_name %}
        <h3 class="form-display-name">{{ form.display_name }}</h3>
      {% endif %}
      {% for error in form.non_field_errors %}
        <div class="alert error">{{ error }}</div>
      {% endfor %}
      {% include 'cae_home/include/form_fields.html' %}
      <hr>
    {% endfor %}
  {% else %}
    {% if form.display_name %}
      <h3 class="form-display-name">{{ form.display_name }}</h3>
    {% endif %}
    {% include 'cae_home/include/form_fields.html' %}
  {% endif %}

  {% if formset %}
    <hr>
    {{ formset.management_form }}
    {% for form in formset %}
      {% if form.display_name %}
        <h3 class="form-display-name">{{ form.display_name }}</h3>
      {% endif %}
      {% for error in form.non_field_errors %}
        <div class="alert error">{{ error }}</div>
      {% endfor %}
      {% include 'cae_home/include/form_fields.html' %}
      <hr>
    {% endfor %}
  {% endif %}

  {% if not exclude_buttons %}
    <div>
      <p></p>

      {% if button_text %}
        <input class="button primary" type="submit" value="{{ button_text }}">
      {% else %}
        <input class="button primary" type="submit" value="Submit">
      {% endif %}

      {% if delete_url %}
        <a href="{{ delete_url }}" class="button warning">Delete</a>
      {% else %}
        <p></p>
      {% endif %}
    </div>
  {% endif %}
</form>
